{"version":3,"file":"jsonld-document-loader.esm.js","sources":["../src/contexts/W3C_Decentralized_Identifiers/index.ts","../src/contexts/W3C_Open_Digital_Rights_Langauge/index.ts","../src/contexts/W3C_Verifiable_Credentials/index.ts","../src/contexts/W3ID_Security_Vocabulary/index.ts","../src/builder/contextFactory.ts","../src/builder/resolverFactory.ts","../src/builder/documentLoaderFactory.ts","../src/index.ts"],"sourcesContent":["import { IContextMap } from '../../types';\nimport W3C_DID_CORE_V1 from './did-v1.json';\n\nconst W3C_DID_CORE_URL_V1 = 'https://www.w3.org/ns/did/v1';\n\nconst W3C_Decentralized_Identifiers: IContextMap = {\n  [W3C_DID_CORE_URL_V1]: W3C_DID_CORE_V1,\n};\n\nexport { W3C_Decentralized_Identifiers };\n","import { IContextMap } from '../../types';\n\nimport W3C_ODRL from './odrl.json';\n\nexport const W3C_ODRL_URL = 'https://www.w3.org/ns/odrl.jsonld';\n\nconst W3C_Open_Digital_Rights_Langauge: IContextMap = {\n  [W3C_ODRL_URL]: W3C_ODRL,\n};\n\nexport { W3C_Open_Digital_Rights_Langauge };\n","import { IContextMap } from '../../types';\n\nimport W3C_VC_DATA_MODEL_V1 from './vc-v1.json';\nimport W3C_VC_DATA_MODEL_EXAMPLES_V1 from './vc-example-v1.json';\n// W3C_Open_Digital_Rights_Langauge is required by W3C_VC_DATA_MODEL_EXAMPLES_V1\nimport { W3C_Open_Digital_Rights_Langauge } from '../W3C_Open_Digital_Rights_Langauge';\n\nconst W3C_VC_DATA_MODEL_URL_V1 = 'https://www.w3.org/2018/credentials/v1';\nconst W3C_VC_DATA_MODEL_EXAMPLES_URL_V1 =\n  'https://www.w3.org/2018/credentials/examples/v1';\n\nconst W3C_Verifiable_Credentials: IContextMap = {\n  [W3C_VC_DATA_MODEL_URL_V1]: W3C_VC_DATA_MODEL_V1,\n  [W3C_VC_DATA_MODEL_EXAMPLES_URL_V1]: W3C_VC_DATA_MODEL_EXAMPLES_V1,\n  ...W3C_Open_Digital_Rights_Langauge,\n};\n\nexport { W3C_Verifiable_Credentials };\n","import { IContextMap } from '../../types';\n\nimport W3ID_SEC_V1 from './sec-v1.json';\nimport W3ID_SEC_V2 from './sec-v2.json';\n\nconst W3ID_SEC_URL_V1 = 'https://w3id.org/security/v1';\nconst W3ID_SEC_URL_V2 = 'https://w3id.org/security/v2';\n\nconst W3ID_Security_Vocabulary: IContextMap = {\n  [W3ID_SEC_URL_V1]: W3ID_SEC_V1,\n  [W3ID_SEC_URL_V2]: W3ID_SEC_V2,\n};\n\nexport { W3ID_Security_Vocabulary };\n","import * as Factory from 'factory.ts';\n\nimport { IContextManager, IContextMap } from '../types';\n\nconst factoryDefaults: IContextManager = {\n  contexts: {},\n  addContext: function(contextMap: IContextMap): IContextManager {\n    this.contexts = {\n      ...this.contexts,\n      ...contextMap,\n    };\n    return this;\n  },\n};\n\nconst pluginFactory = Factory.Sync.makeFactory<IContextManager>(\n  factoryDefaults\n);\n\nconst plugin = pluginFactory.build();\n\nexport { factoryDefaults, pluginFactory, plugin };\n","import * as Factory from 'factory.ts';\n\nimport { IResolverManager, IStartsWithResolver, IResolver } from '../types';\n\nconst factoryDefaults: IResolverManager = {\n  resolvers: {},\n  addResolver: function(\n    startsWithResolverMap: IStartsWithResolver\n  ): IResolverManager {\n    this.resolvers = {\n      ...this.resolvers,\n      ...startsWithResolverMap,\n    };\n    return this;\n  },\n  hasResolverForUri: function(uri: string) {\n    let matchingResolver = undefined;\n    Object.keys(this.resolvers).forEach(startWith => {\n      if (uri.indexOf(startWith) === 0) {\n        matchingResolver = this.resolvers[startWith];\n      }\n    });\n    return matchingResolver;\n  },\n  resolve: function(uri: string) {\n    let matchingResolver = this.hasResolverForUri(uri);\n    if (matchingResolver) {\n      return (matchingResolver as IResolver).resolve(uri);\n    }\n    // console.error('Resolve called on unsupported URI ' + uri);\n    throw new Error('Resolve called on unsupported URI ' + uri);\n  },\n};\n\nconst pluginFactory = Factory.Sync.makeFactory<IResolverManager>(\n  factoryDefaults\n);\n\nconst plugin = pluginFactory.build();\n\nexport { factoryDefaults, pluginFactory, plugin };\n","import { DocumentLoaderManager } from '../types';\n\nimport * as Factory from 'factory.ts';\nimport * as ContextFactory from './contextFactory';\nimport * as ResolverFactory from './resolverFactory';\n\nconst factoryDefaults = {\n  ...ContextFactory.factoryDefaults,\n  ...ResolverFactory.factoryDefaults,\n  documentLoader: async function(uri: string) {\n    let matchingResolver = this.hasResolverForUri(uri);\n    if (matchingResolver) {\n      const doc = await matchingResolver.resolve(uri);\n      return Promise.resolve({\n        contextUrl: null,\n        documentUrl: uri,\n        document: doc,\n      });\n    }\n\n    if (this.contexts[uri]) {\n      const context = this.contexts[uri];\n      return Promise.resolve({\n        contextUrl: null,\n        documentUrl: uri,\n        document: JSON.stringify(context),\n      });\n    }\n    // leave uncommented.\n    console.error('documentLoader called on unsupported URI ' + uri);\n    throw new Error('documentLoader called on unsupported URI ' + uri);\n  },\n  buildDocumentLoader: function() {\n    return (uri: string) => {\n      return this.documentLoader(uri);\n    };\n  },\n} as DocumentLoaderManager;\n\nconst pluginFactory = Factory.Sync.makeFactory<DocumentLoaderManager>(\n  factoryDefaults\n)\n  .combine(ContextFactory.pluginFactory)\n  .combine(ResolverFactory.pluginFactory);\n\nconst plugin = pluginFactory.build();\n\nexport { factoryDefaults, pluginFactory, plugin };\n","import * as contexts from './contexts';\nimport * as types from './types';\n\nimport {\n  contextFactory,\n  resolverFactory,\n  documentLoaderFactory,\n} from './builder';\n\nconst golem = documentLoaderFactory.pluginFactory;\n\nexport {\n  golem,\n  contextFactory,\n  resolverFactory,\n  documentLoaderFactory,\n  contexts,\n  types,\n};\n"],"names":["W3C_DID_CORE_URL_V1","W3C_Decentralized_Identifiers","W3C_DID_CORE_V1","W3C_ODRL_URL","W3C_Open_Digital_Rights_Langauge","W3C_ODRL","W3C_VC_DATA_MODEL_URL_V1","W3C_VC_DATA_MODEL_EXAMPLES_URL_V1","W3C_Verifiable_Credentials","W3C_VC_DATA_MODEL_V1","W3C_VC_DATA_MODEL_EXAMPLES_V1","W3ID_SEC_URL_V1","W3ID_SEC_URL_V2","W3ID_Security_Vocabulary","W3ID_SEC_V1","W3ID_SEC_V2","factoryDefaults","contexts","addContext","contextMap","pluginFactory","Factory","makeFactory","plugin","build","resolvers","addResolver","startsWithResolverMap","hasResolverForUri","uri","matchingResolver","undefined","Object","keys","forEach","startWith","indexOf","resolve","Error","ContextFactory","ResolverFactory","documentLoader","context","Promise","contextUrl","documentUrl","document","JSON","stringify","console","error","doc","buildDocumentLoader","combine","golem","documentLoaderFactory"],"mappings":"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"}